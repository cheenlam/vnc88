<div class="contBox-min" id="page">
    <div class="resourcesBox">
        <div class="res-Title">
            <div class="bank-icon"></div>
            <span>bank information</span>
        </div>
        <div class="bank-List">
            <div class="bank-tb">
                <table>
                    <template v-for="(item,index) in bank.main.slice(0,parseInt(bank.main.length/bankNum)+2)">
                        <tr v-if="index !== 0">
                            <td v-for="(item,index) in bank.main.slice(0+(index-1)*bankNum,bankNum*index)">
                                <a :href="item.href" target="_blank">
                                    <div class="bankTb-img">
                                        <img :src="item.img">
                                    </div>
                                </a>
                            </td>
                        </tr>
                    </template>
                </table>
            </div>

            <div class="resList-list">
                <template v-for="(item,index) in bank.minor.slice(0,parseInt(bank.minor.length/listNum)+2)">
                    <ul v-if="index !== 0">
                        <li v-for="(item,index) in bank.minor.slice(0+(index-1)*listNum,listNum*index)">
                            <a :href="item.href" target="_blank">
                                <span>{{item.txt}}</span>
                            </a>
                        </li>
                    </ul>
                </template>
            </div>
        </div>
        <div class="res-Title">
            <div class="lottory-icon"></div>
            <span>lottory information</span>
        </div>
        <div class="lottory-list">
            <div class="lottory-tb">
                <table>
                    <template v-for="(item,index) in lottory.main.slice(0,parseInt(bank.main.length/lottoryNum)+2)">
                        <tr v-if="index !== 0">
                            <td v-for="(item,index) in lottory.main.slice(0+(index-1)*lottoryNum,lottoryNum*index)">
                                <a :href="item.href" target="_blank">
                                    <div class="lottoryTb_list">
                                        <div class="lottoryTb-img">
                                            <img :src="item.img">
                                        </div>
                                        <span>{{item.txt}}</span>
                                    </div>
                                </a>
                            </td>
                        </tr>
                    </template>
                </table>
            </div>
            <div class="resList-list">
                <template v-for="(item,index) in lottory.minor.slice(0,parseInt(lottory.minor.length/listNum)+2)">
                    <ul v-if="index !== 0">
                        <li v-for="(item,index) in lottory.minor.slice(0+(index-1)*listNum,listNum*index)">
                            <a :href="item.href" target="_blank">
                                <span>{{item.txt}}</span>
                            </a>
                        </li>
                    </ul>
                </template>
            </div>
        </div>

        <div class="mainMsg">
            <!-- flexEvent start -->
            <div class="flexEvent">
                <ul>
                    <li v-for="(item,index) in adImg">
                        <img :src="item.img">
                    </li>
                </ul>
            </div>

            <!-- resNews start -->
            <div class="resNews">
                <div class="mainMsg-title">Thông tin hoạt động</div>
                <div class="mainNews_b">
                    <ul>
                        <template v-for="(item,index) in resNews">
                            <li>
                                <a :href="reHref(index)">
                                    <div class="img" :style="getbgi(item.img)"></div>
                                </a>
                                <p>{{item.title}}</p>
                            </li>
                        </template>   
                    </ul>
                </div>
            </div>

        
            <!-- resQa start -->
            <div class="resQa">
                <div class="mainMsg-title">Vấn đề thường gặp</div>
                <ul>
                    <li v-for="(item,index) in resQa">
                        <div class="question">
                            <div class="icon">Q</div>
                            <p>{{item.question}}</p>
                        </div>
                        <div class="Answer">
                            <div class="icon">A</div>
                            <p :class="{'on': item.txtMore}">{{item.answer}}
                                <span class="switch" @click="item.txtMore = !item.txtMore"></span>
                            </p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="js/index.js"></script>

<script>
    Vue.createApp({
        data() {
            return {
                bank: bankLink,
                lottory: lottoryLink,
                adImg: flexEvent,
                resNews:resNews,
                resQa: resQa,
                bankNum: 6,
                lottoryNum: 3,
                listNum: 6,
            };
        },
        methods: {
            getbgi(data) {
                return `background-image: url(${data})`;
            },
            reHref(index) {
                return `#/resources?p=${index+1}`
            },
            myResize() {
                let num = window.innerWidth;
                if (num > 1200) {
                    this.bankNum = 6
                    this.listNum = 6
                } else if (num <= 1200) {
                    this.bankNum = parseInt(num / 200)
                    this.listNum = parseInt(num / 200)
                }
                this.lottoryNum = num > 1200 ? 3 : 2;
            },
        },
        mounted() {
            window.addEventListener("resize", this.myResize);
            this.myResize();
            indexVue.onLoad = true;
            this.$nextTick(function() {
                setTimeout(function() {
                    indexVue.onLoad = false;
                }, 300)
            })
        },
    }).mount("#page");
</script>